language: python
python:
    - 2.7

env:
    - RUST_VERSION=stable

notifications:
    email:
        recipients:
            - ci@mathijs.vd-nes.nl
        on_success: never
        on_failure: always

before_install:
    - curl -o ~/rustup.sh https://static.rust-lang.org/rustup.sh
    - shippable_retry sudo add-apt-repository ppa:team-xbmc/ppa -y
    - shippable_retry sudo apt-get update -q

install:
    - sudo sh ~/rustup.sh --spec=$RUST_VERSION --disable-sudo -y 2> /dev/null
    - sudo apt-get install libsdl2-dev

before_script:
    - rustc --version
    - cargo --version

script:
    - make debug
    - make test
